<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Word Frequency Counter</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h1>Word Frequency Counter</h1>
    <input type="file" id="fileInput" accept=".txt,.doc">
    <label for="minFreq">Min Frequency:</label>
    <input type="number" id="minFreq" value="1" min="1">
    <button id="analyzeBtn">Analyze</button>
    <div id="output"></div>
  </div>

  <script src="script.js"></script>
</body>
</html>

<script src="https://unpkg.com/mammoth/mammoth.browser.min.js"></script>

<script>
    let counts = {};
let keys = [];
let fileContent = "";

document.getElementById("fileInput").addEventListener("change", handleFile);
document.getElementById("analyzeBtn").addEventListener("click", analyzeText);

function handleFile(event) {
  const file = event.target.files[0];
  if (!file) return;

  if (file.name.endsWith(".txt")) {
    const reader = new FileReader();
    reader.onload = function (e) {
      fileContent = e.target.result;
    };
    reader.readAsText(file);
  }

  else if (file.name.endsWith(".docx")) {
    const reader = new FileReader();
    reader.onload = function (e) {
      const arrayBuffer = e.target.result;

      mammoth.extractRawText({ arrayBuffer: arrayBuffer })
        .then(result => {
          fileContent = result.value;
        })
        .catch(err => {
          alert("Error reading .docx file");
          console.error(err);
        });
    };
    reader.readAsArrayBuffer(file);
  }

  else {
    alert("Unsupported file type. Please upload a .txt or .docx file.");
  }
}

function analyzeText() {
  const output = document.getElementById("output");
  output.innerHTML = "";

  const minFreq = parseInt(document.getElementById("minFreq").value) || 1;

  counts = {};
  keys = [];

  const text = fileContent || "Default text here if no file uploaded.";
  const tokens = text.split(/\W+/);

  tokens.forEach(token => {
    const word = token.toLowerCase();
    if (word && !/\d+/.test(word)) {
      if (!counts[word]) {
        counts[word] = 1;
        keys.push(word);
      } else {
        counts[word]++;
      }
    }
  });

  keys.sort((a, b) => counts[b] - counts[a]);

  keys.forEach(word => {
    if (counts[word] >= minFreq) {
      const div = document.createElement("div");
      div.textContent = `${word} â†’ ${counts[word]}`;
      output.appendChild(div);
    }
  });
}

</script>
